/*! jQuery UI Virtual Keyboard Virtual Caret v1.1.6 (beta) */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(n){"use strict";var p=n.keyboard;p.firefox=void 0!==window.mozInnerScreenX,n.extend(p.css,{caret:"ui-keyboard-caret",caretMirror:"ui-keyboard-mirror-div"}),n.fn.addCaret=function(e){var t={caretClass:"",charAttr:"data-character",charIndex:1,offsetX:0,offsetY:0,adjustHt:0};return this.each(function(){var d,o,i=p.events,c=n(this).data("keyboard");c&&(d=c.caret_options=n.extend({},t,e),o=c.caret_namespace=c.namespace+"caret",c.extensionNamespace.push(o),c.textareaCaretProperties=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],c.caret_setup=function(){var e=p.css,t="keyup keypress mouseup mouseleave ".split(" ").join(o+" "),r="position:absolute;visibility:hidden;top:-9999em;left:-9999em;white-space:pre-wrap;z-index:-10;"+("INPUT"===c.preview.nodeName?"":"word-wrap:break-word;");c.$keyboard.find("."+e.caretMirror).remove(),c.caret_$div=n('<div class="'+e.caretMirror+'" style="'+r+'">').appendTo(c.$keyboard),c.$caret&&c.$caret.remove(),c.$caret=n('<div class="'+e.caret+" "+d.caretClass+'" style="position:absolute;">').insertAfter(c.$preview),c.$el.unbind(i.kbChange+o).bind(i.kbChange+o,function(){c.findCaretPos()}),c.$preview.unbind(t).bind(t,function(){c.findCaretPos()})},c.findCaretPos=function(){var e,t,r,o,i,n,a,s;c.caret_$div&&(e=c.preview,t=parseFloat(c.$preview.css("fontSize")),r="INPUT"===e.nodeName,o=c.caret_$div[0],i=o.style,n=window.getComputedStyle?getComputedStyle(e,null):e.currentStyle,a=p.caret(c.$preview),s=Math["ltr"===n.direction?"max":"min"](a.start,a.end),c.textareaCaretProperties.forEach(function(e){i[e]=n[e]}),p.firefox&&(i.width=parseInt(n.width,10)-2+"px",e.scrollHeight>parseInt(n.height,10))&&(i.overflowY="scroll"),i.width=parseInt(r?e.scrollWidth:n.width,10)+(r?2*t:0)+"px",o.textContent=e.value.substring(0,s),"INPUT"===e.nodeName&&(o.textContent=o.textContent.replace(/\x20/g," ")),(r=document.createElement("span")).textContent=e.value.substring(s)||"​",o.appendChild(r),a="center"===i.textAlign?t:0,c.caretPos={top:r.offsetTop+parseInt(n.borderTopWidth,10)+d.offsetY,left:r.offsetLeft+parseInt(n.borderLeftWidth,10)+d.offsetX},o=parseInt(c.$caret.css("margin-top"),10),i=Math.round(t+2*o)+d.adjustHt,a=c.$preview.position(),c.$caret.css({top:a.top-e.scrollTop+c.caretPos.top-o,left:a.left-e.scrollLeft+c.caretPos.left,height:i}),r=e.value.substring(s,s+d.charIndex).replace(/\s/," ")||" ",c.$caret.attr(d.charAttr,r))},c.$el.unbind(o).bind(i.kbBeforeVisible+o,function(){c.caret_setup()}).bind(i.kbVisible+o,function(){c.findCaretPos()}).bind(i.kbHidden+o,function(){var e="keyup keypress mouseup mouseleave ".split(" ").join(o+" ");c.$preview.unbind(e),c.$caret.remove(),c.$caret=null,c.caret_$div=null}),c.options.alwaysOpen)&&c.isVisible()&&(c.caret_setup(),c.findCaretPos())})}});